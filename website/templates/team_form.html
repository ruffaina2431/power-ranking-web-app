{% extends "base.html" %}
<!-- 
Team Form Template

This template provides a form for creating and editing teams.
Features:
- Dynamic form title based on action (Create/Edit)
- Game selection dropdown with predefined options
- Player roster management
- Team contact information
- Tournament location handling

Form Fields:
- Team Name: Unique identifier for the team
- Game Name: Dropdown of available game categories
- Captain Phone: Contact number for team captain
- Player Names: Dynamic list of player inputs based on max_players

Special Features:
- Predefined game name handling for tournament context
- Tournament location tracking
- Required field validation
- Dynamic player input fields
- Cancel option with return to teams list
-->

{% block title %}{{ action }} Team{% endblock %}

{% block content %}
<h1>{{ action }} Team</h1>
{% if predefined_game_name %}
<div class="alert alert-info">
    <strong>Game Name:</strong> {{ predefined_game_name }}
    {% if predefined_tournament_location %}
    <br><strong>Tournament Location:</strong> {{ predefined_tournament_location }}
    {% endif %}
</div>
{% endif %}
<form method="POST">
    <div class="form-group">
        <label for="name">Team Name</label>
        <input type="text" class="form-control" id="name" name="name" value="{{ team.name if team else '' }}" required>
    </div>
                    <div class="form-group">
                        <label for="game_name">Game Name</label>
                        <select class="form-control" id="game_name" name="game_name" required {% if predefined_game_name %}disabled{% endif %}>
                            <option value="">Select a game</option>
                            {% for category in categories %}
                            <option value="{{ category }}" {% if (team and team.game_name == category) or (predefined_game_name == category) %}selected{% endif %}>{{ category }}</option>
                            {% endfor %}
                        </select>
                        {% if predefined_game_name %}
                        <input type="hidden" name="game_name" value="{{ predefined_game_name }}">
                        {% endif %}
                    </div>
    <div class="form-group">
        <label for="captain_phone">Captain Phone</label>
        <input type="text" class="form-control" id="captain_phone" name="captain_phone" value="{{ team.captain_phone if team else '' }}" required>
    </div>
    <div class="form-group">
        <label for="player-name"></label>Player Name (required)</label>
        {% for i in range(1, max_players + 1) %}
        <input type="text" class="form-control mb-2" name="player{{i}}" placeholder="Player {{i}} Name" required>
        {% endfor %}
        <input type="hidden" name="max_players" value="{{ max_players }}">
    </div>
    {% if predefined_tournament_location %}
    <input type="hidden" name="tournament_location" value="{{ predefined_tournament_location }}">
    {% endif %}
    <button type="submit" class="btn btn-primary">{{ action }}</button>
    <a href="{{ url_for('views.teams') }}" class="btn btn-secondary">Cancel</a>
</form>
{% endblock %}
